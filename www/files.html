<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{title}}</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <h1>INDEX PAGE OF:</h1>
  <h2>{{title}}</h2>
  <ul>
    {{items}}
  </ul>
  <div class="button-container">
    <a href="/index.html" role="button">HOME</a>
    <a href="/upload.html" role="button">POST</a>
  </div>

  <!-- JavaScript to intercept delete button clicks and send DELETE request -->
  <script>
    document.addEventListener("DOMContentLoaded", function() {
      const deleteButtons = document.querySelectorAll("button.delete");
      deleteButtons.forEach(button => {
        button.addEventListener("click", function(event) {
          event.preventDefault();
          const targetUrl = this.getAttribute("data-target");
          const method = this.getAttribute("data-method") || "DELETE";
          this.disabled = true;
          fetch(targetUrl, { method: method })
            .then(response => {
              if (!response.ok) {
                throw new Error("Network response was not ok");
              }
              location.reload();
            })
            .catch(error => {
              console.error("Error during deletion:", error);
              this.disabled = false;
            });
        });
      });
    });
  </script>
</body>
</html>
